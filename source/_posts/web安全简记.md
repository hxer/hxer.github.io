---
title: Web安全简记
date: 2017-03-17 10:40:18
categories: Web安全
tags:
    - Web安全
---

## Web安全

* 安全的本质是`信任问题`
* 安全三要素：`机密性`, `完整性`, `可用性`
* 安全评估：资产等级划分 -> 威胁分析 -> 风险分析 -> 确认解决方案
* 基本原则：默认安全原则，最小权限原则，纵深防御原则，数据代码分离原则，不可预测性原则

<!-- more -->

### OWASP top 10(2013)

* A1 - 注入
* A2 -失效的身份认证和会话管理
* A3 -跨站脚本(XSS)
* A4 - 不安全的直接对象引用
* A5 -安全配置错误
* A6 -敏感信息泄漏
* A7 - 功能级访问控制缺失
* A8 -跨站请求伪造 (CSRF)
* A9 - 使用含有已知漏洞的组件
* A10 - 未验证的重定向和转发


### 漏洞修补流程

* 建立类似bugstracker 的漏洞跟踪机制，并为漏洞的紧急程度选择优先级
* 建立漏洞分析机制，并与程序员一起制定修补方案，同时review补丁的代码实现
* 对曾经出现的漏洞进行归档，并定期统计漏洞修补方案

## DoS 和 DDos

DoS(Denial of Service)，即拒绝服务，造成远程服务器拒绝服务的行为被称为DoS攻击。其目的是使计算机或网络无法提供正常的服务。常见的DoS攻击: `计算机网络带宽攻击` 和 `连通性攻击`。

### 攻击者伪造ACK数据包，发送大量的半连接请求

防范方式：

* 缩短SYN Timeout时间，及时将超时请求丢弃，释放被占用CPU和内存资源。
* 限制同时打开的SYN半连接数目，关闭不必要的服务。
* 设置SYN Cookie，给每一个请求连接的IP地址分配一个Cookie。如果短时间内连续受到某个IP的重复SYN报文，就认定是受到了攻击，以后从这个IP地址来的包会被一概丢弃

### DDoS(Distributed Denial of Service，分布式拒绝服务)

DoS攻击的一种方法。攻击指借助于客户/服务器技术，将多个计算机联合起来作为攻击平台，对一个或多个目标发动DDoS攻击，从而成倍地提高拒绝服务攻击的威力。


#### 防范：

* 反欺骗：对数据包的地址及端口的正确性进行验证，同时进行反向探测
* 协议栈行为模式分析：每个数据包类型需要符合RFC规定，这就好像每个数据包都要有完整规范的着装，只要不符合规范，就自动识别并将其过滤掉
* 特定应用防护：非法流量总是有一些特定特征的
* 带宽控制：真实的访问数据过大时，可以限制其最大输出的流量，以减少下游网络系统的压力

## CSRF

### 防范

* 验证码
* Referer Check，非主要手段，可作为监控手段
*  Anti CSRF Token，多页面共存token问题
